# HydroTurbineBlade
Project using NREL HARP to design hydrodynamic turbine blade for floating river energy generation.

This project designed hydrodynamic turbine blades for use in a floating platform on the Thames.

[NREL HARP_Opt](https://github.com/NREL/HARP_Opt) code was ported to run under [Scilab](https://www.scilab.org/) rather than the Matlab original code, 
allowing the use of FLOSS environments.

From the NREL presentation, (docs/WT_Perf_Users-guide.pdf) [^1]
[^1]: (docs/WT_Perf_Users-guide.pdf)

"The HARP_Opt (Horizontal Axis Rotor Performance Optimization) code utilizes a multiple objective genetic algorithm and blade-element momentum
(BEM) theory flow model to design horizontal-axis wind and hydrokinetic turbine rotors.
Genetic algorithms solve optimization problems by mimicking the principles of biological evolution. Using rules modeled on
biological reproduction and gene modification, genetic algorithms repeatedly modify a population of individuals to create subsequent generations of
"superior" individuals. HARP_Opt utilizes the MATLAB Genetic Algorithm solver to perform this optimization, and the WT_Perf BEM theory code to
predict rotor performance metrics."

As the Thames is regularly filled with weed and debris, the blades were curved to allow debris caught on the leading edge to slide off. 
This design is taken from the mixing blades used in slurry tanks. The Clothoid spline curve used creates a uniform tangential force on any particle trapped on the blade leading edge (this curve is also used in transport engineering so that motorists or train passengers are not subjected to uncomfortable forces transiting in and out of corners). The eventual design resorted to a log spiral curve.

As there are no controllers used in this design, the blades are designed to stall at the upper limit of their designed power output. 
At the proposed location on the Thames, near Lambeth bridge, the river is tidal and flow is regularly reversed, so an airfoil section suited to low-flow, 
low Reynolds number regimens, the Bergey BW3 was selected [^2].

[^2]: Lyon, C.A., Broeren, A.P., Giguere, P., Gopalarathnam, A. and Selig, M.S., 1997. Summary of Low Speed Airfoil Data: Volume 3.

MIT [XFOIL](https://web.mit.edu/drela/Public/web/xfoil/) was used to generate lift and drag coefficients for the airfoil over various angles of attack.

This data is prepared for use in AeroDyn using the 'AirfoilPrep' worksheet, input data is collated within Input_Files directory

The generic blade design optimisation is recorded in the Output_Files as 1W5_BW3_1m, parameters settings 
This optimisation is adapted to a design incorporating a hub in Output_Files as 1W5_BW3_1m_hub

The MATLAB files were ported to Scilab using mfile2sci() to allow exploration of the code without requiring a MATLAB license (SCI_migrate)
The original HARP_Opt suppies a compiled Matlab executable, which functions with a runtime installer (MCRinstaller)
The ported version is in HARP2SWKS/SCI_migrate 

createBladeSkeletonN.sce is a script that extracts the output values of teh blade element scale, radial displcement and orientation from the HARP_Opt worksheet.
This script then creates interpolated airfoil sections and arranges them along the leading edge curve.
The dimensions for a hub are also added to the model as arcs which serve as guides for SolidWorks shape creation.
Finally these airfoil profiles and edges are exported as Solidworks drawings. 

The profile data is used to assemble a lofted surface within Solidworks, 
finally this model is divided up to into sections which make up a 2-part mould for shaping the surfaces from glassfibre.



bladedesign.xls spreadsheet allows calculation of thickness of blade faces and calculation of the dimensions of a balsa core.

Buckland, H., Masters, I., Chapman, J. and Orme, J., 2010, April. Blade Element Momentum Theory in Modelling Tidal Stream Turbines. In Proceedings of the 18th UK Conference on Computational Mechanics, Southampton, UK (pp. 8-10).

Sale, D., Jonkman, J. and Musial, W., 2009. Hydrodynamic optimization method and design code for stall-regulated hydrokinetic turbine rotors (No. NREL/CP-500-45021). National Renewable Energy Lab.(NREL), Golden, CO (United States).

Batten, W.M.J., Bahaj, A.S., Molland, A.F. and Chaplin, J.R., 2006. Hydrodynamics of marine current turbines. Renewable energy, 31(2), pp.249-256.

Lyon, C.A., Broeren, A.P., Giguere, P., Gopalarathnam, A. and Selig, M.S., 1997. Summary of Low Speed Airfoil Data: Volume 3.

Ingram, G., 2011. Wind turbine blade analysis using the blade element momentum method. version 1.1. Durham University, Durham, (2011).

// This program interpolates between blade sections generated by Harp_Opt to create a
// "blade skeleton". The xy coords that define the skeleton are saved in text files.
// These data files can be used in a SolidWorks macro to create a fully 3D blade geometry.
// A solid works macro file that should automatically create the blade geometry is also
// created.
//
// Input: Blade shape, airfoil coordinates
// Output: Coordinates the define airfoil skeleton and a Solidworks macro for creating
// the airfoil geometry
